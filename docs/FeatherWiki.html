<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>Feather Wiki</title> <meta name=description content="It's like TiddlyWiki but as small as possible!"> <meta name=version content=0.0.1> <style id=s>html{font-family:BlinkMacSystemFont,-apple-system,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}html,input,select,option,text{font-size:12pt}body{padding:0 1rem}*{box-sizing:border-box;position:relative}*+*{margin:.5em 0}.sb.n,dialog:not([open]){display:none}a{text-decoration:none}a[target=_blank]:after{font-size:70%;vertical-align:top;margin-left:3px;content:"\29c9"}ul,ol{padding:0 0 0 1rem}label{display:block}.t{font-size:1.5em;font-weight:700}.w1,.w34,.w12,.w14,.r,main{width:100%}.a{background:#888}@media (min-width:35em){body>header,body>footer{max-height:5vh}main{min-height:90vh}.r,main{display:table;border-spacing:1em 0}.c,main>nav.sb,main>section{display:table-cell!important;vertical-align:top}.sb{width:20%;min-width:200px;max-width:500px}.sbt{display:none}.w34{width:75%}.w12{width:50%}.w13{width:33%}.w14{width:25%}.tr{text-align:right}.fr{float:right}.sv{position:absolute;top:0;right:0}}.sr{visibility:hidden;height:0;width:0;position:absolute}.tr:not(.ml){text-align:right}.fr:not(.ml){float:right}.alert{border:2px solid red}.del{background:red;opacity:.8;font-size:.8em;color:#fff}.db{display:block}.il{display:inline}.ib{display:inline-block}.at{vertical-align:top}.h{font-size:.8em}.pb{margin:0 0 1.5em}.uc a{text-decoration:underline}.pell{border:1px solid #888}.pell *{margin:unset}.pell-content,.editor{width:100%;height:300px;outline:0;overflow-y:auto;padding:10px;margin:0}.pell-actionbar{background-color:#fff;border-bottom:1px solid #888}.pell-button{background-color:transparent;border:none;cursor:pointer;height:30px;outline:0;width:30px;vertical-align:middle}.pell-button-selected{background-color:#ddd} </style> </head> <body> <script id=a>(()=>{var Yo=Object.create;var tr=Object.defineProperty;var Qo=Object.getOwnPropertyDescriptor;var ea=Object.getOwnPropertyNames;var ta=Object.getPrototypeOf,na=Object.prototype.hasOwnProperty;var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ra=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ea(t))!na.call(e,i)&&i!==r&&tr(e,i,{get:()=>t[i],enumerable:!(n=Qo(t,i))||n.enumerable});return e};var F=(e,t,r)=>(r=e!=null?Yo(ta(e)):{},ra(t||!e||!e.__esModule?tr(r,"default",{value:e,enumerable:!0}):r,e));var rr=y((pl,nr)=>{nr.exports=ia;function ia(e,t){if(e)try{var r=document.querySelector(e);r&&r.scrollIntoView(t)}catch{}}});var or=y((dl,ir)=>{"use strict";ir.exports=oa;function oa(e){if(typeof document>"u")throw new Error("document-ready only runs in the browser");var t=document.readyState;if(t==="complete"||t==="interactive")return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})}});var X=y((ml,ar)=>{be.notEqual=sa;be.notOk=la;be.equal=aa;be.ok=be;ar.exports=be;function aa(e,t,r){be(e==t,r)}function sa(e,t,r){be(e!=t,r)}function la(e,t){be(!e,t)}function be(e,t){if(!e)throw new Error(t||"AssertionError")}});var lr=y((gl,sr)=>{var fa=X(),ua=typeof window<"u";function ca(){var e;return ua?(window._nanoScheduler||(window._nanoScheduler=new lt(!0)),e=window._nanoScheduler):e=new lt,e}function lt(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}lt.prototype.push=function(e){fa.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()};lt.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(var r;e.queue.length&&t.timeRemaining()>0;)r=e.queue.shift(),r(t);e.scheduled=!1,e.queue.length&&e.schedule()})}};lt.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})};sr.exports=ca});var mn=y((vl,ur)=>{var fr=lr()(),ha=X(),Ie;qt.disabled=!0;try{Ie=window.performance,qt.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!Ie.mark}catch{}ur.exports=qt;function qt(e){if(ha.equal(typeof e,"string","nanotiming: name should be type string"),qt.disabled)return pa;var t=(Ie.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,r="start-"+t+"-"+e;Ie.mark(r);function n(i){var o="end-"+t+"-"+e;Ie.mark(o),fr.push(function(){var a=null;try{var l=e+" ["+t+"]";Ie.measure(l,r,o),Ie.clearMarks(r),Ie.clearMarks(o)}catch(s){a=s}i&&i(a,e)})}return n.uuid=t,n}function pa(e){e&&fr.push(function(){e(new Error("nanotiming: performance API unavailable"))})}});var hr=y((bl,cr)=>{var Rt=X();cr.exports=Xe;function Xe(){if(!(this instanceof Xe))return new Xe;this.trie={nodes:{}}}Xe.prototype.create=function(e){Rt.equal(typeof e,"string","route should be a string");var t=e.replace(/^\//,"").split("/");function r(n,i){var o=Ot(t,n)&&t[n];if(o===!1)return i;var a=null;return/^:|^\*/.test(o)?(Ot(i.nodes,"$$")?a=i.nodes.$$:(a={nodes:{}},i.nodes.$$=a),o[0]==="*"&&(i.wildcard=!0),i.name=o.replace(/^:|^\*/,"")):Ot(i.nodes,o)?a=i.nodes[o]:(a={nodes:{}},i.nodes[o]=a),r(n+1,a)}return r(0,this.trie)};Xe.prototype.match=function(e){Rt.equal(typeof e,"string","route should be a string");var t=e.replace(/^\//,"").split("/"),r={};function n(o,a){if(a!==void 0){var l=t[o];if(l===void 0)return a;if(Ot(a.nodes,l))return n(o+1,a.nodes[l]);if(a.name){try{r[a.name]=decodeURIComponent(l)}catch{return n(o,void 0)}return n(o+1,a.nodes.$$)}else if(a.wildcard){try{r.wildcard=decodeURIComponent(t.slice(o).join("/"))}catch{return n(o,void 0)}return a.nodes.$$}else return n(o+1)}}var i=n(0,this.trie);if(!!i)return i=Object.assign({},i),i.params=r,i};Xe.prototype.mount=function(e,t){Rt.equal(typeof e,"string","route should be a string"),Rt.equal(typeof t,"object","trie should be a object");var r=e.replace(/^\//,"").split("/"),n=null,i=null;if(r.length===1)i=r[0],n=this.create(i);else{var o=r.join("/");i=r[0],n=this.create(o)}Object.assign(n.nodes,t.nodes),t.name&&(n.name=t.name),n.nodes[""]&&(Object.keys(n.nodes[""]).forEach(function(a){a!=="nodes"&&(n[a]=n.nodes[""][a])}),Object.assign(n.nodes,n.nodes[""].nodes),delete n.nodes[""].nodes)};function Ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}});var dr=y((_l,pr)=>{var gn=X(),da=hr();pr.exports=vn;function vn(e){if(!(this instanceof vn))return new vn(e);var t=(e||"").replace(/^\//,""),r=da();return i._trie=r,i.on=n,i.emit=i,i.match=o,i._wayfarer=!0,i;function n(l,s){if(gn.equal(typeof l,"string"),gn.equal(typeof s,"function"),l=l||"/",s._wayfarer&&s._trie)r.mount(l,s._trie.trie);else{var f=r.create(l);f.cb=s,f.route=l}return i}function i(l){var s=o(l),f=new Array(arguments.length);f[0]=s.params;for(var h=1;h<f.length;h++)f[h]=arguments[h];return s.cb.apply(s.cb,f)}function o(l){gn.notEqual(l,void 0,"'route' must be defined");var s=r.match(l);if(s&&s.cb)return new a(s);var f=r.match(t);if(f&&f.cb)return new a(f);throw new Error("route '"+l+"' did not match")}function a(l){this.cb=l.cb,this.route=l.route,this.params=l.params}}});var br=y((wl,vr)=>{var bn=X(),ma=dr(),mr=/file:\/\//.test(typeof window=="object"&&window.location&&window.location.origin),ga="^(file://|/)(.*.html?/?)?",va="^(http(s)?(://))?(www.)?",ba="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",_a="[?].*$",wa=new RegExp(ga),ya=new RegExp(va+ba),Ea=new RegExp("#"),Sa=new RegExp(_a);vr.exports=Ze;function Ze(e){if(!(this instanceof Ze))return new Ze(e);e=e||{},this.router=ma(e.default||"/404")}Ze.prototype.on=function(e,t){bn.equal(typeof e,"string"),e=e.replace(/^[#/]/,""),this.router.on(e,t)};Ze.prototype.emit=function(e){return bn.equal(typeof e,"string"),e=gr(e,mr),this.router.emit(e)};Ze.prototype.match=function(e){return bn.equal(typeof e,"string"),e=gr(e,mr),this.router.match(e)};function gr(e,t){return t?e=e.replace(wa,""):e=e.replace(ya,""),decodeURI(e.replace(Sa,"").replace(Ea,"/"))}});var wr=y((yl,_r)=>{_r.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"]});var Sr=y((El,Er)=>{var yr=wr(),Aa=yr.length,Ta=1,xa=3,Ca=8;Er.exports=La;function La(e,t){var r=e.nodeType,n=e.nodeName;r===Ta&&$a(e,t),(r===xa||r===Ca)&&t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),n==="INPUT"?Oa(e,t):n==="OPTION"?qa(e,t):n==="TEXTAREA"&&Ra(e,t),Ia(e,t)}function $a(e,t){for(var r=t.attributes,n=e.attributes,i=null,o=null,a=null,l=null,s=null,f=n.length-1;f>=0;--f)s=n[f],l=s.name,i=s.namespaceURI,o=s.value,i?(l=s.localName||l,a=t.getAttributeNS(i,l),a!==o&&t.setAttributeNS(i,l,o)):t.hasAttribute(l)?(a=t.getAttribute(l),a!==o&&(o==="null"||o==="undefined"?t.removeAttribute(l):t.setAttribute(l,o))):t.setAttribute(l,o);for(var h=r.length-1;h>=0;--h)s=r[h],s.specified!==!1&&(l=s.name,i=s.namespaceURI,i?(l=s.localName||l,e.hasAttributeNS(i,l)||t.removeAttributeNS(i,l)):e.hasAttributeNS(null,l)||t.removeAttribute(l))}function Ia(e,t){for(var r=0;r<Aa;r++){var n=yr[r];e[n]?t[n]=e[n]:t[n]&&(t[n]=void 0)}}function qa(e,t){_n(e,t,"selected")}function Oa(e,t){var r=e.value,n=t.value;_n(e,t,"checked"),_n(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(t.indeterminate=e.indeterminate),t.type!=="file"&&(r!==n&&(t.setAttribute("value",r),t.value=r),r==="null"&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?t.type==="range"&&(t.value=r):t.removeAttribute("value"))}function Ra(e,t){var r=e.value;if(r!==t.value&&(t.value=r),t.firstChild&&t.firstChild.nodeValue!==r){if(r===""&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=r}}function _n(e,t,r){e[r]!==t[r]&&(t[r]=e[r],e[r]?t.setAttribute(r,""):t.removeAttribute(r))}});var Lr=y((Sl,Cr)=>{var wn=X(),Da=Sr(),ka=3;Cr.exports=Pa;function Pa(e,t,r){return wn.equal(typeof e,"object","nanomorph: oldTree should be an object"),wn.equal(typeof t,"object","nanomorph: newTree should be an object"),r&&r.childrenOnly?(xr(t,e),e):(wn.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),Dt(t,e))}function Dt(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||Ar(e)!==Ar(t)?e:(Da(e,t),xr(e,t),t):null:e}function Ar(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function xr(e,t){for(var r,n,i,o,a=0,l=0;r=t.childNodes[l],n=e.childNodes[l-a],!(!r&&!n);l++)if(!n)t.removeChild(r),l--;else if(!r)t.appendChild(n),a++;else if(Tr(n,r))i=Dt(n,r),i!==r&&(t.replaceChild(i,r),a++);else{o=null;for(var s=l;s<t.childNodes.length;s++)if(Tr(t.childNodes[s],n)){o=t.childNodes[s];break}o?(i=Dt(n,o),i!==o&&a++,t.insertBefore(i,r)):!n.id&&!r.id?(i=Dt(n,r),i!==r&&(t.replaceChild(i,r),a++)):(t.insertBefore(n,r),a++)}}function Tr(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName!==t.tagName?!1:e.type===ka?e.nodeValue===t.nodeValue:!1}});var Ir=y((Al,$r)=>{var Ma=/([^?=&]+)(=([^&]*))?/g,Na=X();$r.exports=Ha;function Ha(e){Na.equal(typeof e,"string","nanoquery: url should be type string");var t={};return e.replace(/^.*\?/,"").replace(Ma,function(r,n,i,o){var a=decodeURIComponent(o),l=decodeURIComponent(n);t.hasOwnProperty(l)?Array.isArray(t[l])?t[l].push(a):t[l]=[t[l],a]:t[l]=a}),t}});var Or=y((Tl,qr)=>{var yn=X(),Ba=/(noopener|noreferrer) (noopener|noreferrer)/,Fa=/^[\w-_]+:/;qr.exports=ja;function ja(e,t){yn.notEqual(typeof window,"undefined","nanohref: expected window to exist"),t=t||window.document,yn.equal(typeof e,"function","nanohref: cb should be type function"),yn.equal(typeof t,"object","nanohref: root should be type object"),window.addEventListener("click",function(r){if(!(r.button&&r.button!==0||r.ctrlKey||r.metaKey||r.altKey||r.shiftKey||r.defaultPrevented)){var n=function i(o){if(!(!o||o===t))return o.localName!=="a"||o.href===void 0?i(o.parentNode):o}(r.target);!n||window.location.protocol!==n.protocol||window.location.hostname!==n.hostname||window.location.port!==n.port||n.hasAttribute("data-nanohref-ignore")||n.hasAttribute("download")||n.getAttribute("target")==="_blank"&&Ba.test(n.getAttribute("rel"))||Fa.test(n.getAttribute("href"))||(r.preventDefault(),e(n))}})}});var kr=y((xl,Dr)=>{"use strict";var Rr=X();Dr.exports=Ga;function Ga(e,t){Rr.equal(typeof e,"function","nanoraf: render should be a function"),Rr.ok(typeof t=="function"||typeof t>"u","nanoraf: raf should be a function or undefined"),t||(t=window.requestAnimationFrame);var r=!1,n=null;return function(){n===null&&!r&&(r=!0,t(function(){r=!1;for(var a=n.length,l=new Array(a),s=0;s<a;s++)l[s]=n[s];e.apply(e,l),n=null})),n=arguments}}});var Mr=y((Cl,Pr)=>{"use strict";Pr.exports=function(t,r,n){var i,o=t.length;if(!(r>=o||n===0)){n=r+n>o?o-r:n;var a=o-n;for(i=r;i<a;++i)t[i]=t[i+n];t.length=a}}});var Hr=y((Ll,Nr)=>{var Va=Mr(),Ua=mn(),ne=X();Nr.exports=Z;function Z(e){if(!(this instanceof Z))return new Z(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}Z.prototype.emit=function(e){ne.ok(typeof e=="string"||typeof e=="symbol","nanobus.emit: eventName should be type string or symbol");for(var t=[],r=1,n=arguments.length;r<n;r++)t.push(arguments[r]);var i=Ua(this._name+"('"+e.toString()+"')"),o=this._listeners[e];return o&&o.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,i.uuid),i(),this};Z.prototype.on=Z.prototype.addListener=function(e,t){return ne.ok(typeof e=="string"||typeof e=="symbol","nanobus.on: eventName should be type string or symbol"),ne.equal(typeof t,"function","nanobus.on: listener should be type function"),e==="*"?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this};Z.prototype.prependListener=function(e,t){return ne.ok(typeof e=="string"||typeof e=="symbol","nanobus.prependListener: eventName should be type string or symbol"),ne.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),e==="*"?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this};Z.prototype.once=function(e,t){ne.ok(typeof e=="string"||typeof e=="symbol","nanobus.once: eventName should be type string or symbol"),ne.equal(typeof t,"function","nanobus.once: listener should be type function");var r=this;this.on(e,n);function n(){t.apply(r,arguments),r.removeListener(e,n)}return this};Z.prototype.prependOnceListener=function(e,t){ne.ok(typeof e=="string"||typeof e=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),ne.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var r=this;this.prependListener(e,n);function n(){t.apply(r,arguments),r.removeListener(e,n)}return this};Z.prototype.removeListener=function(e,t){if(ne.ok(typeof e=="string"||typeof e=="symbol","nanobus.removeListener: eventName should be type string or symbol"),ne.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),e==="*")return this._starListeners=this._starListeners.slice(),r(this._starListeners,t);return typeof this._listeners[e]<"u"&&(this._listeners[e]=this._listeners[e].slice()),r(this._listeners[e],t);function r(n,i){if(!!n){var o=n.indexOf(i);if(o!==-1)return Va(n,o,1),!0}}};Z.prototype.removeAllListeners=function(e){return e?e==="*"?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this};Z.prototype.listeners=function(e){var t=e!=="*"?this._listeners[e]:this._starListeners,r=[];if(t)for(var n=t.length,i=0;i<n;i++)r.push(t[i]);return r};Z.prototype._emit=function(e,t,r,n){if(!(typeof e>"u")&&e.length!==0){r===void 0&&(r=t,t=null),t&&(n!==void 0?r=[t].concat(r,n):r=[t].concat(r));for(var i=e.length,o=0;o<i;o++){var a=e[o];a.apply(a,r)}}}});var Fr=y(($l,Br)=>{Br.exports=J;function J(e){if(!(this instanceof J))return new J(e);typeof e=="number"&&(e={max:e}),e||(e={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}Object.defineProperty(J.prototype,"keys",{get:function(){return Object.keys(this.cache)}});J.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};J.prototype.remove=function(e){if(typeof e!="string"&&(e=""+e),!!this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}};J.prototype._unlink=function(e,t,r){this.length--,this.length===0?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=r,this.cache[this.tail].prev=null):(this.cache[t].next=r,this.cache[r].prev=t)};J.prototype.peek=function(e){if(!!this.cache.hasOwnProperty(e)){var t=this.cache[e];if(!!this._checkAge(e,t))return t.value}};J.prototype.set=function(e,t){typeof e!="string"&&(e=""+e);var r;if(this.cache.hasOwnProperty(e)){if(r=this.cache[e],r.value=t,this.maxAge&&(r.modified=Date.now()),e===this.head)return t;this._unlink(e,r.prev,r.next)}else r={value:t,modified:0,next:null,prev:null},this.maxAge&&(r.modified=Date.now()),this.cache[e]=r,this.length===this.max&&this.evict();return this.length++,r.next=null,r.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t};J.prototype._checkAge=function(e,t){return this.maxAge&&Date.now()-t.modified>this.maxAge?(this.remove(e),!1):!0};J.prototype.get=function(e){if(typeof e!="string"&&(e=""+e),!!this.cache.hasOwnProperty(e)){var t=this.cache[e];if(!!this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}};J.prototype.evict=function(){!this.tail||this.remove(this.tail)}});var Ur=y((Il,Vr)=>{var ft=X(),jr=Fr();Vr.exports=En;function En(e,t,r){ft.ok(this instanceof En,"ChooComponentCache should be created with `new`"),ft.equal(typeof e,"object","ChooComponentCache: state should be type object"),ft.equal(typeof t,"function","ChooComponentCache: emit should be type function"),typeof r=="number"?this.cache=new jr(r):this.cache=r||new jr(100),this.state=e,this.emit=t}En.prototype.render=function(e,t){ft.equal(typeof e,"function","ChooComponentCache.render: Component should be type function"),ft.ok(typeof t=="string"||typeof t=="number","ChooComponentCache.render: id should be type string or type number");var r=this.cache.get(t);if(!r){for(var n=[],i=2,o=arguments.length;i<o;i++)n.push(arguments[i]);n.unshift(e,t,this.state,this.emit),r=Gr.apply(Gr,n),this.cache.set(t,r)}return r};function Gr(e){return new(e.bind.apply(e,arguments))}});var Jr=y((ql,Kr)=>{var Wr=rr(),Zr=or(),ue=mn(),Wa=br(),zr=Lr(),Xa=Ir(),Za=Or(),za=kr(),Ka=Hr(),I=X(),Ja=Ur();Kr.exports=re;var Xr={};function re(e){var t=ue("choo.constructor");if(!(this instanceof re))return new re(e);e=e||{},I.equal(typeof e,"object","choo: opts should be type object");var r=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=e.history===void 0?!0:e.history,this._hrefEnabled=e.href===void 0?!0:e.href,this._hashEnabled=e.hash===void 0?!1:e.hash,this._hasWindow=typeof window<"u",this._cache=e.cache,this._loaded=!1,this._stores=[i],this._tree=null;var n={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,n):n,delete window.initialState):this.state=n,this.router=Wa({curry:!0}),this.emitter=Ka("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title);function i(o){r.emitter.prependListener(r._events.DOMTITLECHANGE,function(a){I.equal(typeof a,"string","events.DOMTitleChange: title should be type string"),o.title=a,r._hasWindow&&(document.title=a)})}t()}re.prototype.route=function(e,t){var r=ue("choo.route('"+e+"')");I.equal(typeof e,"string","choo.route: route should be type string"),I.equal(typeof t,"function","choo.handler: route should be type function"),this.router.on(e,t),r()};re.prototype.use=function(e){I.equal(typeof e,"function","choo.use: cb should be type function");var t=this;this._stores.push(function(r){var n="choo.use";n=e.storeName?n+"("+e.storeName+")":n;var i=ue(n);e(r,t.emitter,t),i()})};re.prototype.start=function(){I.equal(typeof window,"object","choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node");var e=ue("choo.start"),t=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){t._matchRoute(t.state),t._loaded&&(t.emitter.emit(t._events.RENDER),setTimeout(Wr.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(r){I.equal(typeof r,"string","events.pushState: href should be type string"),window.history.pushState(Xr,null,r),t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(r){I.equal(typeof r,"string","events.replaceState: href should be type string"),window.history.replaceState(Xr,null,r),t.emitter.emit(t._events.NAVIGATE)}),window.onpopstate=function(){t.emitter.emit(t._events.POPSTATE)},t._hrefEnabled&&Za(function(r){var n=r.href,i=r.hash;if(n===window.location.href){!t._hashEnabled&&i&&Wr(i);return}t.emitter.emit(t._events.PUSHSTATE,n)})),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach(function(r){r(t.state)}),this._tree=this._prerender(this.state),I.ok(this._tree,"choo.start: no valid DOM node returned for location "+this.state.href),this.emitter.prependListener(t._events.RENDER,za(function(){var r=ue("choo.render"),n=t._prerender(t.state);I.ok(n,"choo.render: no valid DOM node returned for location "+t.state.href),I.equal(t._tree.nodeName,n.nodeName,"choo.render: The target node <"+t._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+n.nodeName.toLowerCase()+">.");var i=ue("choo.morph");zr(t._tree,n),i(),r()})),Zr(function(){t.emitter.emit(t._events.DOMCONTENTLOADED),t._loaded=!0}),e(),this._tree};re.prototype.mount=function(t){var r=ue("choo.mount('"+t+"')");if(typeof window!="object")return I.ok(typeof t=="string","choo.mount: selector should be type String"),this.selector=t,r(),this;I.ok(typeof t=="string"||typeof t=="object","choo.mount: selector should be type String or HTMLElement");var n=this;Zr(function(){var i=ue("choo.render"),o=n.start();typeof t=="string"?n._tree=document.querySelector(t):n._tree=t,I.ok(n._tree,"choo.mount: could not query selector: "+t),I.equal(n._tree.nodeName,o.nodeName,"choo.mount: The target node <"+n._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+o.nodeName.toLowerCase()+">.");var a=ue("choo.morph");zr(n._tree,o),a(),i()}),r()};re.prototype.toString=function(e,t){t=t||{},t.components=t.components||{},t.events=Object.assign({},t.events,this._events),I.notEqual(typeof window,"object","choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser"),I.equal(typeof e,"string","choo.toString: location should be type string"),I.equal(typeof t,"object","choo.toString: state should be type object"),this._setCache(t),this._matchRoute(t,e),this.emitter.removeAllListeners(),this._stores.forEach(function(n){n(t)});var r=this._prerender(t);return I.ok(r,"choo.toString: no valid value returned for the route "+e),I(!Array.isArray(r),"choo.toString: return value was an array for the route "+e),typeof r.outerHTML=="string"?r.outerHTML:r.toString()};re.prototype._matchRoute=function(e,t){var r,n;t?(r=t.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(r=r.replace(/#.+$/,"")),n=t):(r=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(r+=window.location.hash.replace(/^#/,"/")),n=window.location.search);var i=this.router.match(r);this._handler=i.cb,e.href=r,e.query=Xa(n),e.route=i.route,e.params=i.params};re.prototype._prerender=function(e){var t=ue("choo.prerender('"+e.route+"')"),r=this._handler(e,this.emit);return t(),r};re.prototype._setCache=function(e){var t=new Ja(e,this.emitter.emit.bind(this.emitter),this._cache);e.cache=r;function r(n,i){I.equal(typeof n,"function","choo.state.cache: Component should be type function");for(var o=[],a=0,l=arguments.length;a<l;a++)o.push(arguments[a]);return t.render.apply(t,o)}r.toJSON=function(){return null}}});var Li=y((Ol,Ci)=>{var O=32768,Ya=0,Qa=1,es=2,oi=6,ai=!1,ts=32768,si=1024*8,ns=2*O,V=3,ze=258,li=16,In=8192,Wt=15,rs=In,qn=1<<Wt,On=qn-1,fi=O-1,mt=0,is=4096,Xt=ze+V+1,gt=O-Xt,Pe=1,ct=15,os=7,ui=29,Zt=256,ci=256,vt=Zt+1+ui,He=30,zt=19,hi=16,pi=17,di=18,Rn=2*vt+1,Dn=parseInt((Wt+V-1)/V,10),Me,N,Pt,xn,Be=null,U,H,Mt,T,kn,Pn,De,qe,he,Ae,pe,Re,Yr,ht,x,ie,E,bt,Te,L,mi,Mn,Oe,gi,vi,de,xe,ye,Ne,B,ae,se,_e,G,C,we,Ke,oe,_t,wt,Nn,Bt,Kt,Ee,Nt,Hn,pt,Ht,Je,Jt,Ft,Cn;In>ts&&console.error("error: INBUFSIZ is too small");O<<1>1<<li&&console.error("error: WSIZE is too large");Wt>li-1&&console.error("error: HASH_BITS is too large");(Wt<8||ze!==258)&&console.error("error: Code too clever");function ut(){this.fc=0,this.dl=0}function Sn(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function ce(e,t,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n}function as(){this.next=null,this.len=0,this.ptr=[],this.off=0}var Ln=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],dt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ss=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],kt=[new ce(0,0,0,0),new ce(4,4,8,4),new ce(4,5,16,8),new ce(4,6,32,32),new ce(4,4,16,16),new ce(8,16,32,32),new ce(8,16,128,128),new ce(8,32,128,256),new ce(32,128,258,1024),new ce(32,258,258,4096)];function ls(e){var t;if(e?e<1?e=1:e>9&&(e=9):e=oi,Oe=e,xn=!1,Te=!1,Be===null){for(Me=N=Pt=null,Be=[],T=[],kn=[],Pn=[],De=[],de=[],t=0;t<Rn;t++)de[t]=new ut;for(xe=[],t=0;t<2*He+1;t++)xe[t]=new ut;for(ye=[],t=0;t<vt+2;t++)ye[t]=new ut;for(Ne=[],t=0;t<He;t++)Ne[t]=new ut;for(B=[],t=0;t<2*zt+1;t++)B[t]=new ut;ae=new Sn,se=new Sn,_e=new Sn,G=[],C=[],oe=[],_t=[],wt=[],Nn=[],Bt=[],Kt=[]}}function fs(e){e.next=Me,Me=e}function us(){var e;return Me!==null?(e=Me,Me=Me.next):e=new as,e.next=null,e.len=e.off=0,e}function _i(e){return De[O+e]}function wi(e,t){return De[O+e]=t}function jt(e){Be[H+U++]=e,H+U===si&&ws()}function Gt(e){e&=65535,H+U<si-2?(Be[H+U++]=e&255,Be[H+U++]=e>>>8):(jt(e&255),jt(e>>>8))}function Vt(){pe=(pe<<Dn^T[E+V-1]&255)&On,Re=_i(pe),De[E&fi]=Re,wi(pe,E)}function Se(e,t){z(t[e].fc,t[e].dl)}function yi(e){return(e<256?wt[e]:wt[256+(e>>7)])&255}function Qr(e,t,r){return e[t].fc<e[r].fc||e[t].fc===e[r].fc&&oe[t]<=oe[r]}function Ei(e,t,r){var n;for(n=0;n<r&&Cn<Ft.length;n++)e[t+n]=Ft[Cn++]&255;return n}function cs(){var e;for(e=0;e<qn;e++)De[O+e]=0;if(Mn=kt[Oe].max_lazy,gi=kt[Oe].good_length,ai||(vi=kt[Oe].nice_length),mi=kt[Oe].max_chain,E=0,Ae=0,L=Ei(T,0,2*O),L<=0){Te=!0,L=0;return}for(Te=!1;L<Xt&&!Te;)Bn();for(pe=0,e=0;e<V-1;e++)pe=(pe<<Dn^T[e]&255)&On}function Si(e){var t=mi,r=E,n,i,o=ie,a=E>gt?E-gt:mt,l=E+ze,s=T[r+o-1],f=T[r+o],h,p;ie>=gi&&(t>>=2);do if(n=e,!(T[n+o]!==f||T[n+o-1]!==s||T[n]!==T[r]||T[++n]!==T[r+1])){for(r+=2,n++;r<l;){for(p=!1,h=0;h<8;h+=1)if(r+=1,n+=1,T[r]!==T[n]){p=!0;break}if(p)break}if(i=ze-(l-r),r=l-ze,i>o){if(bt=e,o=i,ai){if(i>=ze)break}else if(i>=vi)break;s=T[r+o-1],f=T[r+o]}}while((e=De[e&fi])>a&&--t!==0);return o}function Bn(){var e,t,r=ns-L-E;if(r===-1)r--;else if(E>=O+gt){for(e=0;e<O;e++)T[e]=T[e+O];for(bt-=O,E-=O,Ae-=O,e=0;e<qn;e++)t=_i(e),wi(e,t>=O?t-O:mt);for(e=0;e<O;e++)t=De[e],De[e]=t>=O?t-O:mt;r+=O}Te||(e=Ei(T,E+L,r),e<=0?Te=!0:L+=e)}function hs(){for(;L!==0&&N===null;){var e;if(Vt(),Re!==mt&&E-Re<=gt&&(x=Si(Re),x>L&&(x=L)),x>=V)if(e=yt(E-bt,x-V),L-=x,x<=Mn){x--;do E++,Vt();while(--x!==0);E++}else E+=x,x=0,pe=T[E]&255,pe=(pe<<Dn^T[E+1]&255)&On;else e=yt(0,T[E]&255),L--,E++;for(e&&(Ut(0),Ae=E);L<Xt&&!Te;)Bn()}}function ps(){for(;L!==0&&N===null;){if(Vt(),ie=x,Yr=bt,x=V-1,Re!==mt&&ie<Mn&&E-Re<=gt&&(x=Si(Re),x>L&&(x=L),x===V&&E-bt>is&&x--),ie>=V&&x<=ie){var e;e=yt(E-1-Yr,ie-V),L-=ie-1,ie-=2;do E++,Vt();while(--ie!==0);ht=!1,x=V-1,E++,e&&(Ut(0),Ae=E)}else ht?(yt(0,T[E-1]&255)&&(Ut(0),Ae=E),E++,L--):(ht=!0,E++,L--);for(;L<Xt&&!Te;)Bn()}}function ds(){Te||(qe=0,he=0,gs(),cs(),N=null,U=0,H=0,Oe<=3?(ie=V-1,x=0):(x=V-1,ht=!1),Mt=!1)}function ms(e,t,r){var n;return!xn&&(ds(),xn=!0,L===0)?(Mt=!0,0):(n=ei(e,t,r),n===r?r:Mt?n:(Oe<=3?hs():ps(),L===0&&(ht&&yt(0,T[E-1]&255),Ut(1),Mt=!0),n+ei(e,n+t,r-n)))}function ei(e,t,r){var n,i,o;for(n=0;N!==null&&n<r;){for(i=r-n,i>N.len&&(i=N.len),o=0;o<i;o++)e[t+n+o]=N.ptr[N.off+o];if(N.off+=i,N.len-=i,n+=i,N.len===0){var a;a=N,N=N.next,fs(a)}}if(n===r)return n;if(H<U){for(i=r-n,i>U-H&&(i=U-H),o=0;o<i;o++)e[t+n+o]=Be[H+o];H+=i,n+=i,U===H&&(U=H=0)}return n}function gs(){var e,t,r,n,i;if(Ne[0].dl===0){for(ae.dyn_tree=de,ae.static_tree=ye,ae.extra_bits=Ln,ae.extra_base=Zt+1,ae.elems=vt,ae.max_length=ct,ae.max_code=0,se.dyn_tree=xe,se.static_tree=Ne,se.extra_bits=dt,se.extra_base=0,se.elems=He,se.max_length=ct,se.max_code=0,_e.dyn_tree=B,_e.static_tree=null,_e.extra_bits=ss,_e.extra_base=0,_e.elems=zt,_e.max_length=os,_e.max_code=0,r=0,n=0;n<ui-1;n++)for(Nn[n]=r,e=0;e<1<<Ln[n];e++)_t[r++]=n;for(_t[r-1]=n,i=0,n=0;n<16;n++)for(Bt[n]=i,e=0;e<1<<dt[n];e++)wt[i++]=n;for(i>>=7;n<He;n++)for(Bt[n]=i<<7,e=0;e<1<<dt[n]-7;e++)wt[256+i++]=n;for(t=0;t<=ct;t++)G[t]=0;for(e=0;e<=143;)ye[e++].dl=8,G[8]++;for(;e<=255;)ye[e++].dl=9,G[9]++;for(;e<=279;)ye[e++].dl=7,G[7]++;for(;e<=287;)ye[e++].dl=8,G[8]++;for(Ti(ye,vt+1),e=0;e<He;e++)Ne[e].dl=5,Ne[e].fc=xi(e,5);Ai()}}function Ai(){var e;for(e=0;e<vt;e++)de[e].fc=0;for(e=0;e<He;e++)xe[e].fc=0;for(e=0;e<zt;e++)B[e].fc=0;de[ci].fc=1,Je=Jt=0,Ee=Nt=Hn=0,pt=0,Ht=1}function An(e,t){for(var r=C[t],n=t<<1;n<=we&&(n<we&&Qr(e,C[n+1],C[n])&&n++,!Qr(e,r,C[n]));)C[t]=C[n],t=n,n<<=1;C[t]=r}function vs(e){var t=e.dyn_tree,r=e.extra_bits,n=e.extra_base,i=e.max_code,o=e.max_length,a=e.static_tree,l,s,f,h,p,u,c=0;for(h=0;h<=ct;h++)G[h]=0;for(t[C[Ke]].dl=0,l=Ke+1;l<Rn;l++)s=C[l],h=t[t[s].dl].dl+1,h>o&&(h=o,c++),t[s].dl=h,!(s>i)&&(G[h]++,p=0,s>=n&&(p=r[s-n]),u=t[s].fc,Je+=u*(h+p),a!==null&&(Jt+=u*(a[s].dl+p)));if(c!==0){do{for(h=o-1;G[h]===0;)h--;G[h]--,G[h+1]+=2,G[o]--,c-=2}while(c>0);for(h=o;h!==0;h--)for(s=G[h];s!==0;)f=C[--l],!(f>i)&&(t[f].dl!==h&&(Je+=(h-t[f].dl)*t[f].fc,t[f].fc=h),s--)}}function Ti(e,t){var r=[],n=0,i,o;for(i=1;i<=ct;i++)n=n+G[i-1]<<1,r[i]=n;for(o=0;o<=t;o++){var a=e[o].dl;a!==0&&(e[o].fc=xi(r[a]++,a))}}function $n(e){var t=e.dyn_tree,r=e.static_tree,n=e.elems,i,o,a=-1,l=n;for(we=0,Ke=Rn,i=0;i<n;i++)t[i].fc!==0?(C[++we]=a=i,oe[i]=0):t[i].dl=0;for(;we<2;){var s=C[++we]=a<2?++a:0;t[s].fc=1,oe[s]=0,Je--,r!==null&&(Jt-=r[s].dl)}for(e.max_code=a,i=we>>1;i>=1;i--)An(t,i);do i=C[Pe],C[Pe]=C[we--],An(t,Pe),o=C[Pe],C[--Ke]=i,C[--Ke]=o,t[l].fc=t[i].fc+t[o].fc,oe[i]>oe[o]+1?oe[l]=oe[i]:oe[l]=oe[o]+1,t[i].dl=t[o].dl=l,C[Pe]=l++,An(t,Pe);while(we>=2);C[--Ke]=C[Pe],vs(e),Ti(t,a)}function ti(e,t){var r,n=-1,i,o=e[0].dl,a=0,l=7,s=4;for(o===0&&(l=138,s=3),e[t+1].dl=65535,r=0;r<=t;r++)i=o,o=e[r+1].dl,!(++a<l&&i===o)&&(a<s?B[i].fc+=a:i!==0?(i!==n&&B[i].fc++,B[hi].fc++):a<=10?B[pi].fc++:B[di].fc++,a=0,n=i,o===0?(l=138,s=3):i===o?(l=6,s=3):(l=7,s=4))}function ni(e,t){var r,n=-1,i,o=e[0].dl,a=0,l=7,s=4;for(o===0&&(l=138,s=3),r=0;r<=t;r++)if(i=o,o=e[r+1].dl,!(++a<l&&i===o)){if(a<s)do Se(i,B);while(--a!==0);else i!==0?(i!==n&&(Se(i,B),a--),Se(hi,B),z(a-3,2)):a<=10?(Se(pi,B),z(a-3,3)):(Se(di,B),z(a-11,7));a=0,n=i,o===0?(l=138,s=3):i===o?(l=6,s=3):(l=7,s=4)}}function bs(){var e;for(ti(de,ae.max_code),ti(xe,se.max_code),$n(_e),e=zt-1;e>=3&&B[bi[e]].dl===0;e--);return Je+=3*(e+1)+5+5+4,e}function _s(e,t,r){var n;for(z(e-257,5),z(t-1,5),z(r-4,4),n=0;n<r;n++)z(B[bi[n]].dl,3);ni(de,e-1),ni(xe,t-1)}function Ut(e){var t,r,n,i,o;if(i=E-Ae,Kt[Hn]=pt,$n(ae),$n(se),n=bs(),t=Je+3+7>>3,r=Jt+3+7>>3,r<=t&&(t=r),i+4<=t&&Ae>=0)for(z((Ya<<1)+e,3),ii(),Gt(i),Gt(~i),o=0;o<i;o++)jt(T[Ae+o]);else r===t?(z((Qa<<1)+e,3),ri(ye,Ne)):(z((es<<1)+e,3),_s(ae.max_code+1,se.max_code+1,n+1),ri(de,xe));Ai(),e!==0&&ii()}function yt(e,t){if(Pn[Ee++]=t,e===0?de[t].fc++:(e--,de[_t[t]+Zt+1].fc++,xe[yi(e)].fc++,kn[Nt++]=e,pt|=Ht),Ht<<=1,(Ee&7)===0&&(Kt[Hn++]=pt,pt=0,Ht=1),Oe>2&&(Ee&4095)===0){var r=Ee*8,n=E-Ae,i;for(i=0;i<He;i++)r+=xe[i].fc*(5+dt[i]);if(r>>=3,Nt<parseInt(Ee/2,10)&&r<parseInt(n/2,10))return!0}return Ee===In-1||Nt===rs}function ri(e,t){var r,n,i=0,o=0,a=0,l=0,s,f;if(Ee!==0)do(i&7)===0&&(l=Kt[a++]),n=Pn[i++]&255,(l&1)===0?Se(n,e):(s=_t[n],Se(s+Zt+1,e),f=Ln[s],f!==0&&(n-=Nn[s],z(n,f)),r=kn[o++],s=yi(r),Se(s,t),f=dt[s],f!==0&&(r-=Bt[s],z(r,f))),l>>=1;while(i<Ee);Se(ci,e)}var Tn=16;function z(e,t){he>Tn-t?(qe|=e<<he,Gt(qe),qe=e>>Tn-he,he+=t-Tn):(qe|=e<<he,he+=t)}function xi(e,t){var r=0;do r|=e&1,e>>=1,r<<=1;while(--t>0);return r>>1}function ii(){he>8?Gt(qe):he>0&&jt(qe),qe=0,he=0}function ws(){var e,t;if(U!==0){for(e=us(),N===null?N=Pt=e:Pt=Pt.next=e,e.len=U-H,t=0;t<e.len;t++)e.ptr[t]=Be[H+t];U=H=0}}function ys(e,t){var r,n;Ft=e,Cn=0,typeof t>"u"&&(t=oi),ls(t),n=[];do r=ms(n,n.length,1024);while(r>0);return Ft=null,n}Ci.exports=ys});var Hi=y((Rl,Ni)=>{var je=32768,$i=0,Es=1,Ss=2,As=9,Ts=6,Le,Q,Yt=null,Ii,Qt,en,At,Ye,Ce,Et,j,Qe,$e,jn,Y,Fe,tn,Fn,xs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Di=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ki=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],Pi=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Mi=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function Oi(){this.next=null,this.list=null}function Ri(){this.e=0,this.b=0,this.n=0,this.t=null}function St(e,t,r,n,i,o){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var a,l=[],s,f,h,p,u,c,v,g=[],_,m,w,d=new Ri,b=[],k=[],P,ee=[],A,te,S,It,ke;for(ke=this.root=null,u=0;u<this.BMAX+1;u++)l[u]=0;for(u=0;u<this.BMAX+1;u++)g[u]=0;for(u=0;u<this.BMAX;u++)b[u]=null;for(u=0;u<this.N_MAX;u++)k[u]=0;for(u=0;u<this.BMAX+1;u++)ee[u]=0;s=t>256?e[256]:this.BMAX,_=e,m=0,u=t;do l[_[m]]++,m++;while(--u>0);if(l[0]===t){this.root=null,this.m=0,this.status=0;return}for(c=1;c<=this.BMAX&&l[c]===0;c++);for(v=c,o<c&&(o=c),u=this.BMAX;u!==0&&l[u]===0;u--);for(h=u,o>u&&(o=u),te=1<<c;c<u;c++,te<<=1)if((te-=l[c])<0){this.status=2,this.m=o;return}if((te-=l[u])<0){this.status=2,this.m=o;return}for(l[u]+=te,ee[1]=c=0,_=l,m=1,A=2;--u>0;)ee[A++]=c+=_[m++];_=e,m=0,u=0;do(c=_[m++])!==0&&(k[ee[c]++]=u);while(++u<t);for(t=ee[h],ee[0]=u=0,_=k,m=0,p=-1,P=g[0]=0,w=null,S=0,null;v<=h;v++)for(a=l[v];a-- >0;){for(;v>P+g[1+p];){if(P+=g[1+p],p++,S=(S=h-P)>o?o:S,(f=1<<(c=v-P))>a+1)for(f-=a+1,A=v;++c<S&&!((f<<=1)<=l[++A]);)f-=l[A];for(P+c>s&&P<s&&(c=s-P),S=1<<c,g[1+p]=c,w=[],It=0;It<S;It++)w[It]=new Ri;ke?ke=ke.next=new Oi:ke=this.root=new Oi,ke.next=null,ke.list=w,b[p]=w,p>0&&(ee[p]=u,d.b=g[p],d.e=16+c,d.t=w,c=(u&(1<<P)-1)>>P-g[p],b[p-1][c].e=d.e,b[p-1][c].b=d.b,b[p-1][c].n=d.n,b[p-1][c].t=d.t)}for(d.b=v-P,m>=t?d.e=99:_[m]<r?(d.e=_[m]<256?16:15,d.n=_[m++]):(d.e=i[_[m]-r],d.n=n[_[m++]-r]),f=1<<v-P,c=u>>P;c<S;c+=f)w[c].e=d.e,w[c].b=d.b,w[c].n=d.n,w[c].t=d.t;for(c=1<<v-1;(u&c)!==0;c>>=1)u^=c;for(u^=c;(u&(1<<P)-1)!==ee[p];)P-=g[p],p--}this.m=g[1],this.status=te!==0&&h!==1?1:0}function Cs(){return tn.length===Fn?-1:tn[Fn++]&255}function R(e){for(;Ye<e;)At|=Cs()<<Ye,Ye+=8}function D(e){return At&xs[e]}function q(e){At>>=e,Ye-=e}function nn(e,t,r){var n,i,o;if(r===0)return 0;for(o=0;;){for(R(Y),i=$e.list[D(Y)],n=i.e;n>16;){if(n===99)return-1;q(i.b),n-=16,R(n),i=i.t[D(n)],n=i.e}if(q(i.b),n===16){if(Q&=je-1,e[t+o++]=Le[Q++]=i.n,o===r)return r;continue}if(n===15)break;for(R(n),j=i.n+D(n),q(n),R(Fe),i=jn.list[D(Fe)],n=i.e;n>16;){if(n===99)return-1;q(i.b),n-=16,R(n),i=i.t[D(n)],n=i.e}for(q(i.b),R(n),Qe=Q-i.n-D(n),q(n);j>0&&o<r;)j--,Qe&=je-1,Q&=je-1,e[t+o++]=Le[Q++]=Le[Qe++];if(o===r)return r}return Ce=-1,o}function Ls(e,t,r){var n;if(n=Ye&7,q(n),R(16),n=D(16),q(16),R(16),n!==(~At&65535))return-1;for(q(16),j=n,n=0;j>0&&n<r;)j--,Q&=je-1,R(8),e[t+n++]=Le[Q++]=D(8),q(8);return j===0&&(Ce=-1),n}function $s(e,t,r){if(!Yt){var n,i=[],o;for(n=0;n<144;n++)i[n]=8;for(null;n<256;n++)i[n]=9;for(null;n<280;n++)i[n]=7;for(null;n<288;n++)i[n]=8;if(Qt=7,o=new St(i,288,257,Di,ki,Qt),o.status!==0)return console.error("HufBuild error: "+o.status),-1;for(Yt=o.root,Qt=o.m,n=0;n<30;n++)i[n]=5;if(en=5,o=new St(i,30,0,Pi,Mi,en),o.status>1)return Yt=null,console.error("HufBuild error: "+o.status),-1;Ii=o.root,en=o.m}return $e=Yt,jn=Ii,Y=Qt,Fe=en,nn(e,t,r)}function Is(e,t,r){var n,i,o,a,l,s,f,h,p=[],u;for(n=0;n<286+30;n++)p[n]=0;if(R(5),f=257+D(5),q(5),R(5),h=1+D(5),q(5),R(4),s=4+D(4),q(4),f>286||h>30)return-1;for(i=0;i<s;i++)R(3),p[qi[i]]=D(3),q(3);for(null;i<19;i++)p[qi[i]]=0;if(Y=7,u=new St(p,19,19,null,null,Y),u.status!==0)return-1;for($e=u.root,Y=u.m,a=f+h,n=o=0;n<a;)if(R(Y),l=$e.list[D(Y)],i=l.b,q(i),i=l.n,i<16)p[n++]=o=i;else if(i===16){if(R(2),i=3+D(2),q(2),n+i>a)return-1;for(;i-- >0;)p[n++]=o}else if(i===17){if(R(3),i=3+D(3),q(3),n+i>a)return-1;for(;i-- >0;)p[n++]=0;o=0}else{if(R(7),i=11+D(7),q(7),n+i>a)return-1;for(;i-- >0;)p[n++]=0;o=0}if(Y=As,u=new St(p,f,257,Di,ki,Y),Y===0&&(u.status=1),u.status!==0&&u.status!==1)return-1;for($e=u.root,Y=u.m,n=0;n<h;n++)p[n]=p[n+f];return Fe=Ts,u=new St(p,h,0,Pi,Mi,Fe),jn=u.root,Fe=u.m,Fe===0&&f>257||u.status!==0?-1:nn(e,t,r)}function qs(){Le||(Le=[]),Q=0,At=0,Ye=0,Ce=-1,Et=!1,j=Qe=0,$e=null}function Os(e,t,r){var n,i;for(n=0;n<r;){if(Et&&Ce===-1)return n;if(j>0){if(Ce!==$i)for(;j>0&&n<r;)j--,Qe&=je-1,Q&=je-1,e[t+n++]=Le[Q++]=Le[Qe++];else{for(;j>0&&n<r;)j--,Q&=je-1,R(8),e[t+n++]=Le[Q++]=D(8),q(8);j===0&&(Ce=-1)}if(n===r)return n}if(Ce===-1){if(Et)break;R(1),D(1)!==0&&(Et=!0),q(1),R(2),Ce=D(2),q(2),$e=null,j=0}switch(Ce){case $i:i=Ls(e,t+n,r-n);break;case Es:$e?i=nn(e,t+n,r-n):i=$s(e,t+n,r-n);break;case Ss:$e?i=nn(e,t+n,r-n):i=Is(e,t+n,r-n);break;default:i=-1;break}if(i===-1)return Et?0:-1;n+=i}return n}function Rs(e){var t=[],r;qs(),tn=e,Fn=0;do r=Os(t,t.length,1024);while(r>0);return tn=null,t}Ni.exports=Rs});var Fi=y((Dl,Bi)=>{Bi.exports=function(){"use strict";var e=[],t=3988292384;function r(){var l,s,f;for(s=0;s<256;s+=1){for(l=s,f=0;f<8;f+=1)l&1?l=t^l>>>1:l=l>>>1;e[s]=l>>>0}}function n(l){return Array.prototype.map.call(l,function(s){return s.charCodeAt(0)})}function i(l){var s=-1,f,h,p,u;for(f=0,p=l.length;f<p;f+=1){for(u=(s^l[f])&255,h=0;h<8;h+=1)(u&1)===1?u=u>>>1^t:u=u>>>1;s=s>>>8^u}return s^-1}function o(l,s){var f,h,p;if(!((typeof o.crc>"u"||!s||!l)&&(o.crc=-1,!l))){for(f=o.crc,h=0,p=l.length;h<p;h+=1)f=f>>>8^e[(f^l[h])&255];return o.crc=f,f^-1}}r();var a=function(f,s){var f=typeof f=="string"?n(f):f,h=s?i(f):o(f);return(h>>>0).toString(16)};return a.direct=i,a.table=o,a}});var zi=y((kl,Zi)=>{var Ds=Li(),ks=Hi(),Vi=Fi(),Ui=31,Wi=139,Un={deflate:8},tt={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},Wn={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18},Ps="unix",Xi=6;function le(e,t){t.push(e&255)}function ji(e,t){t.push(e&255),t.push(e>>>8)}function Gn(e,t){ji(e&65535,t),ji(e>>>16,t)}function Ms(e,t){var r,n=e.length;for(r=0;r<n;r+=1)le(e.charCodeAt(r),t)}function et(e){return e.shift()}function rn(e){return e.shift()|e.shift()<<8}function Vn(e){var t=rn(e),r=rn(e);return r>32768?(r-=32768,(r<<16|t)+32768*Math.pow(2,16)):r<<16|t}function Gi(e){for(var t=[];e[0]!==0;)t.push(String.fromCharCode(e.shift()));return e.shift(),t.join("")}function Ns(e,t){var r,n=[];for(r=0;r<t;r+=1)n.push(e.shift());return n}function Hs(e,t){var r=0,n,i,o=[];return t||(t={}),n=t.level||Xi,typeof e=="string"&&(e=Array.prototype.map.call(e,function(a){return a.charCodeAt(0)})),le(Ui,o),le(Wi,o),le(Un.deflate,o),t.name&&(r|=tt.FNAME),le(r,o),Gn(t.timestamp||parseInt(Date.now()/1e3,10),o),le(n===1?4:n===9?2:0,o),le(Wn[Ps],o),t.name&&(Ms(t.name.substring(t.name.lastIndexOf("/")+1),o),le(0,o)),Ds(e,n).forEach(function(a){le(a,o)}),Gn(parseInt(Vi(e),16),o),Gn(e.length,o),o}function Bs(e,t){var r=Array.prototype.slice.call(e,0),n,i,o,a,l,s,f,h,p,u;if(et(r)!==Ui||et(r)!==Wi)throw"Not a GZIP file";if(n=et(r),n=Object.keys(Un).some(function(c){return i=c,Un[c]===n}),!n)throw"Unsupported compression method";if(o=et(r),a=Vn(r),l=et(r),n=et(r),Object.keys(Wn).some(function(c){if(Wn[c]===n)return f=c,!0}),o&tt.FEXTRA&&(n=rn(r),Ns(r,n)),o&tt.FNAME&&Gi(r),o&tt.FCOMMENT&&Gi(r),o&tt.FHCRC&&rn(r),i==="deflate"&&(u=ks(r.splice(0,r.length-8))),o&tt.FTEXT&&(u=Array.prototype.map.call(u,function(c){return String.fromCharCode(c)}).join("")),h=Vn(r),h!==parseInt(Vi(u),16))throw"Checksum does not match";if(p=Vn(r),p!==u.length)throw"Size of decompressed file not correct";return u}var Fs={zip:Hs,unzip:Bs,get DEFAULT_LEVEL(){return Xi}};Zi.exports=Fs});var Ji=y((Pl,Ki)=>{var Xn={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",r,n,i,o,a,l,s,f=0;for(e=Xn._utf8_encode(e);f<e.length;)r=e.charCodeAt(f++),n=e.charCodeAt(f++),i=e.charCodeAt(f++),o=r>>2,a=(r&3)<<4|n>>4,l=(n&15)<<2|i>>6,s=i&63,isNaN(n)?l=s=64:isNaN(i)&&(s=64),t=t+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(l)+this._keyStr.charAt(s);return t},decode:function(e){var t="",r,n,i,o,a,l,s,f=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<e.length;)o=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),l=this._keyStr.indexOf(e.charAt(f++)),s=this._keyStr.indexOf(e.charAt(f++)),r=o<<2|a>>4,n=(a&15)<<4|l>>2,i=(l&3)<<6|s,t=t+String.fromCharCode(r),l!=64&&(t=t+String.fromCharCode(n)),s!=64&&(t=t+String.fromCharCode(i));return t=Xn._utf8_decode(t),t},_utf8_encode:function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(n&63|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(n&63|128))}return t},_utf8_decode:function(e){for(var t="",r=0,n=c1=c2=0;r<e.length;)n=e.charCodeAt(r),n<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(c2=e.charCodeAt(r+1),t+=String.fromCharCode((n&31)<<6|c2&63),r+=2):(c2=e.charCodeAt(r+1),c3=e.charCodeAt(r+2),t+=String.fromCharCode((n&15)<<12|(c2&63)<<6|c3&63),r+=3);return t}};Ki.exports=Xn});var zn=y((Ml,so)=>{var Yi=zi(),Qi=Ji(),me={},Tt=-1,eo={}.toString;function to(e,t){var r,n=e.length;for(r=0;r<n;r++)if(e[r][1]===t)return!0;return!1}function no(e){var t,r=e.length,n=[];for(t=0;t<r;t++)to(n,e[t][1])||n.push(e[t]);return n}function js(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Gs(e){return eo.call(e)==="[object Object]"}function Zn(e){return eo.call(e)==="[object Array]"}function Vs(e){var t={},r,n=e.length,i;for(r=0;r<n;r++)i=e[r],t[i[0]]=i[1];return t}function ro(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=_!?()*",i=[],o=e;for(t=t||n.length,r=r||0;o>=t;)i.push(n.charCodeAt(o%t+r)),o=Math.floor(o/t-1);return i.push(n.charCodeAt(o+r)),i.reverse()}function io(e){return String.fromCharCode.apply(String,e)}function oo(e,t){var r,n,i;for(n in e)typeof e[n]<"u"&&(i=e[n],(Gs(i)||Zn(i))&&(t=t.concat(no(oo(i,t)))),isNaN(Number(n))&&(to(t,n)||(Tt+=1,r=[io(ro(Tt)),n],t.push(r))));return t}function ao(e){var t,r=e.length,n={};for(t=0;t<r;t++){var i=e[t][0];n[i]=t}for(t=0;t<r;t++){var o=e[t][1];if(typeof n[o]<"u"){var a=n[o];return Tt+=1,e[a][0]=io(ro(Tt)),n[a]=e[a][0],delete n[o],ao(e)}}return e}function Us(e,t,r){var n,i;for(n=0,i=e.length;n<i;n++)e[n]=me.compress(e[n],t,r)}function Ws(e,t,r){var n,i,o,a,l;for(t=oo(e,t),t=no(t),r===!0&&(t=ao(t)),i=JSON.stringify(e),o=t.length,a=0;a<o;a++)n=t[a],i=i.replace(new RegExp('(?:"'+js(n[1])+'"):',"g"),'"'+n[0]+'":');return l=JSON.parse(i),l._=Vs(t),l}function Xs(e){var t,r;for(t=0,r=e.length;t<r;t++)e[t]=me.decompress(e[t])}function Zs(e){var t,r,n;t=JSON.parse(JSON.stringify(e._)),delete e._,r=JSON.stringify(e);for(n in t)typeof t[n]<"u"&&(r=r.replace(new RegExp('(?:"'+n+'"):',"g"),'"'+t[n]+'":'));return r}me.compress=function(e,t,r){typeof t=="boolean"?(r=t,t=void 0):r=typeof r<"u"?r:!1,typeof t>"u"&&(Tt=-1);var n=t||[],i;return Zn(e)?(Us(e,n,r),i=e):i=Ws(e,n,r),i};me.pack=function(e,t,r){var n=JSON.stringify(t?me.compress(e,r):e),i=Yi.zip(n,{level:9}),o;try{o=String.fromCharCode.apply(String,i)}catch(a){if(a instanceof RangeError)o=function(l){for(var s="",f=new Uint8Array(l),h=f.byteLength,p=0;p<h;p++)s+=String.fromCharCode(f[p]);return s}(i);else throw a}return Qi.encode(o)};me.decompress=function(e){var t,r=JSON.parse(JSON.stringify(e));return Zn(r)?Xs(r):t=Zs(r),t?JSON.parse(t):r};function zs(e){for(var t=0,r=e.length,n=[];t<r;t++)n.push(e.charCodeAt(t));return n}me.unpack=function(e,t){var r=zs(Qi.decode(e)),n,i=Yi.unzip(r,{level:9});try{n=String.fromCharCode.apply(String,i)}catch(a){if(a instanceof RangeError)n=function(l){for(var s="",f=new Uint8Array(l),h=f.byteLength,p=0;p<h;p++)s+=String.fromCharCode(f[p]);return s}(i);else throw a}var o=JSON.parse(n);return t?me.decompress(o):o};me.inject=function(e){return e.compress=this.compress,e.decompress=this.decompress,e.pack=this.pack,e.unpack=this.unpack,e};so.exports=me});var ho=y((Fl,co)=>{co.exports=Ks;var uo={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function Ks(e){return function(t,r,n){for(var i in r)i in uo&&(r[uo[i]]=r[i],delete r[i]);return e(t,r,n)}}});var mo=y((jl,po)=>{var Js=ho(),nt=0,ge=1,W=2,on=3,fe=4,$=5,Jn=6,Ge=7,M=8,it=9,ot=10,Ct=11,Ve=12,rt=13;po.exports=function(e,t){t||(t={});var r=t.concat||function(i,o){return String(i)+String(o)};return t.attrToProp!==!1&&(e=Js(e)),function(i){for(var o=ge,a="",l=arguments.length,s=[],f=0;f<i.length;f++)if(f<l-1){var h=arguments[f+1],p=P(i[f]),u=o;u===ot&&(u=M),u===it&&(u=M),u===Ge&&(u=M),u===fe&&(u=$),u===W?a==="/"?(p.push([W,"/",h]),a=""):p.push([W,h]):u===rt&&t.comments?a+=String(h):u!==rt&&p.push([nt,u,h]),s.push.apply(s,p)}else s.push.apply(s,P(i[f]));for(var c=[null,{},[]],v=[[c,-1]],f=0;f<s.length;f++){var g=v[v.length-1][0],p=s[f],_=p[0];if(_===W&&/^\//.test(p[1])){var m=v[v.length-1][1];v.length>1&&(v.pop(),v[v.length-1][0][2][m]=e(g[0],g[1],g[2].length?g[2]:void 0))}else if(_===W){var w=[p[1],{},[]];g[2].push(w),v.push([w,g[2].length-1])}else if(_===$||_===nt&&p[1]===$){for(var d="",b;f<s.length;f++)if(s[f][0]===$)d=r(d,s[f][1]);else if(s[f][0]===nt&&s[f][1]===$)if(typeof s[f][2]=="object"&&!d)for(b in s[f][2])s[f][2].hasOwnProperty(b)&&!g[1][b]&&(g[1][b]=s[f][2][b]);else d=r(d,s[f][2]);else break;s[f][0]===Ct&&f++;for(var k=f;f<s.length;f++)if(s[f][0]===M||s[f][0]===$)g[1][d]?s[f][1]===""||(g[1][d]=r(g[1][d],s[f][1])):g[1][d]=n(s[f][1]);else if(s[f][0]===nt&&(s[f][1]===M||s[f][1]===$))g[1][d]?s[f][2]===""||(g[1][d]=r(g[1][d],s[f][2])):g[1][d]=n(s[f][2]);else{d.length&&!g[1][d]&&f===k&&(s[f][0]===on||s[f][0]===Ve)&&(g[1][d]=d.toLowerCase()),s[f][0]===on&&f--;break}}else if(_===$)g[1][p[1]]=!0;else if(_===nt&&p[1]===$)g[1][p[2]]=!0;else if(_===on){if(el(g[0])&&v.length){var m=v[v.length-1][1];v.pop(),v[v.length-1][0][2][m]=e(g[0],g[1],g[2].length?g[2]:void 0)}}else if(_===nt&&p[1]===ge)p[2]===void 0||p[2]===null?p[2]="":p[2]||(p[2]=r("",p[2])),Array.isArray(p[2][0])?g[2].push.apply(g[2],p[2]):g[2].push(p[2]);else if(_===ge)g[2].push(p[1]);else if(!(_===Ct||_===Ve))throw new Error("unhandled: "+_)}if(c[2].length>1&&/^\s*$/.test(c[2][0])&&c[2].shift(),c[2].length>2||c[2].length===2&&/\S/.test(c[2][1])){if(t.createFragment)return t.createFragment(c[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(c[2][0])&&typeof c[2][0][0]=="string"&&Array.isArray(c[2][0][2])&&(c[2][0]=e(c[2][0][0],c[2][0][1],c[2][0][2])),c[2][0];function P(ee){var A=[];o===Ge&&(o=fe);for(var te=0;te<ee.length;te++){var S=ee.charAt(te);o===ge&&S==="<"?(a.length&&A.push([ge,a]),a="",o=W):S===">"&&!Ys(o)&&o!==rt?(o===W&&a.length?A.push([W,a]):o===$?A.push([$,a]):o===M&&a.length&&A.push([M,a]),A.push([on]),a="",o=ge):o===rt&&/-$/.test(a)&&S==="-"?(t.comments&&A.push([M,a.substr(0,a.length-1)]),a="",o=ge):o===W&&/^!--$/.test(a)?(t.comments&&A.push([W,a],[$,"comment"],[Ct]),a=S,o=rt):o===ge||o===rt?a+=S:o===W&&S==="/"&&a.length||(o===W&&/\s/.test(S)?(a.length&&A.push([W,a]),a="",o=fe):o===W?a+=S:o===fe&&/[^\s"'=/]/.test(S)?(o=$,a=S):o===fe&&/\s/.test(S)?(a.length&&A.push([$,a]),A.push([Ve])):o===$&&/\s/.test(S)?(A.push([$,a]),a="",o=Jn):o===$&&S==="="?(A.push([$,a],[Ct]),a="",o=Ge):o===$?a+=S:(o===Jn||o===fe)&&S==="="?(A.push([Ct]),o=Ge):(o===Jn||o===fe)&&!/\s/.test(S)?(A.push([Ve]),/[\w-]/.test(S)?(a+=S,o=$):o=fe):o===Ge&&S==='"'?o=ot:o===Ge&&S==="'"?o=it:o===ot&&S==='"'?(A.push([M,a],[Ve]),a="",o=fe):o===it&&S==="'"?(A.push([M,a],[Ve]),a="",o=fe):o===Ge&&!/\s/.test(S)?(o=M,te--):o===M&&/\s/.test(S)?(A.push([M,a],[Ve]),a="",o=fe):(o===M||o===it||o===ot)&&(a+=S))}return o===ge&&a.length?(A.push([ge,a]),a=""):o===M&&a.length?(A.push([M,a]),a=""):o===ot&&a.length?(A.push([M,a]),a=""):o===it&&a.length?(A.push([M,a]),a=""):o===$&&(A.push([$,a]),a=""),A}};function n(i){return typeof i=="function"||typeof i=="string"||i&&typeof i=="object"||i==null?i:r("",i)}};function Ys(e){return e===it||e===ot}var Qs=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9\x7F-\uFFFF_:-]+)*$");function el(e){return Qs.test(e)}});var wo=y((Gl,_o)=>{"use strict";var an=/\n[\s]+$/,sn=/^\n[\s]+/,go=/[\s]+$/,vo=/^[\s]+/,ln=/[\n\s]+/g,bo=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],fn=["code","pre","textarea"];_o.exports=function e(t,r){if(!!Array.isArray(r))for(var n=t.nodeName.toLowerCase(),i=!1,o,a,l=0,s=r.length;l<s;l++){var f=r[l];if(Array.isArray(f)){e(t,f);continue}(typeof f=="number"||typeof f=="boolean"||typeof f=="function"||f instanceof Date||f instanceof RegExp)&&(f=f.toString());var h=t.childNodes[t.childNodes.length-1];if(typeof f=="string")i=!0,h&&h.nodeName==="#text"?h.nodeValue+=f:(f=t.ownerDocument.createTextNode(f),t.appendChild(f),h=f),l===s-1&&(i=!1,bo.indexOf(n)===-1&&fn.indexOf(n)===-1?(o=h.nodeValue.replace(sn,"").replace(go,"").replace(an,"").replace(ln," "),o===""?t.removeChild(h):h.nodeValue=o):fn.indexOf(n)===-1&&(a=l===0?"":" ",o=h.nodeValue.replace(sn,a).replace(vo," ").replace(go,"").replace(an,"").replace(ln," "),h.nodeValue=o));else if(f&&f.nodeType){i&&(i=!1,bo.indexOf(n)===-1&&fn.indexOf(n)===-1?(o=h.nodeValue.replace(sn,"").replace(an," ").replace(ln," "),o===""?t.removeChild(h):h.nodeValue=o):fn.indexOf(n)===-1&&(o=h.nodeValue.replace(vo," ").replace(sn,"").replace(an," ").replace(ln," "),h.nodeValue=o));var p=f.nodeName;p&&(n=p.toLowerCase()),t.appendChild(f)}}}});var Eo=y((Vl,yo)=>{"use strict";yo.exports=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]});var Ao=y((Ul,So)=>{"use strict";So.exports=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"]});var xo=y((Wl,To)=>{"use strict";To.exports=["indeterminate"]});var Lo=y((Xl,Co)=>{"use strict";var tl=mo(),nl=wo(),rl=Eo(),il=Ao(),ol=xo(),al="http://www.w3.org/2000/svg",sl="http://www.w3.org/1999/xlink",ll="!--";Co.exports=function(e){function t(i,o,a){var l;rl.indexOf(i)!==-1&&(o.namespace=al);var s=!1;o.namespace&&(s=o.namespace,delete o.namespace);var f=!1;if(o.is&&(f=o.is,delete o.is),s)f?l=e.createElementNS(s,i,{is:f}):l=e.createElementNS(s,i);else{if(i===ll)return e.createComment(o.comment);f?l=e.createElement(i,{is:f}):l=e.createElement(i)}for(var h in o)if(o.hasOwnProperty(h)){var p=h.toLowerCase(),u=o[h];if(p==="classname"&&(p="class",h="class"),h==="htmlFor"&&(h="for"),il.indexOf(p)!==-1){if(String(u)==="true")u=p;else if(String(u)==="false")continue}p.slice(0,2)==="on"||ol.indexOf(p)!==-1?l[h]=u:s?h==="xlink:href"?l.setAttributeNS(sl,h,u):/^xmlns($|:)/i.test(h)||l.setAttributeNS(null,h,u):l.setAttribute(h,u)}return nl(l,a),l}function r(i){for(var o=e.createDocumentFragment(),a=0;a<i.length;a++)i[a]!=null&&(Array.isArray(i[a])?o.appendChild(r(i[a])):(typeof i[a]=="string"&&(i[a]=e.createTextNode(i[a])),o.appendChild(i[a])));return o}var n=tl(t,{comments:!0,createFragment:r});return n.default=n,n.createComment=t,n}});var Io=y((Zl,$o)=>{$o.exports=Lo()(document)});var ve=y((zl,qo)=>{qo.exports=Io()});var Po=y((tf,ko)=>{"use strict";function fl(e){var t=document.createElement("div");return t.innerHTML=e,ul(t.childNodes)}function ul(e){return Array.isArray(e)?e:[].slice.call(e)}ko.exports=fl});var Qn=y((nf,Mo)=>{Mo.exports=Po()});var Go=y((dn,jo)=>{(function(e,t){typeof dn=="object"&&typeof jo<"u"?t(dn):typeof define=="function"&&define.amd?define(["exports"],t):t(e.pell={})})(dn,function(e){"use strict";var t=Object.assign||function(c){for(var v=1;v<arguments.length;v++){var g=arguments[v];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(c[_]=g[_])}return c},r="defaultParagraphSeparator",n="formatBlock",i=function(c,v,g){return c.addEventListener(v,g)},o=function(c,v){return c.appendChild(v)},a=function(c){return document.createElement(c)},l=function(c){return document.queryCommandState(c)},s=function(c){var v=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return document.execCommand(c,!1,v)},f={bold:{icon:"<b>B</b>",title:"Bold",state:function(){return l("bold")},result:function(){return s("bold")}},italic:{icon:"<i>I</i>",title:"Italic",state:function(){return l("italic")},result:function(){return s("italic")}},underline:{icon:"<u>U</u>",title:"Underline",state:function(){return l("underline")},result:function(){return s("underline")}},strikethrough:{icon:"<strike>S</strike>",title:"Strike-through",state:function(){return l("strikeThrough")},result:function(){return s("strikeThrough")}},heading1:{icon:"<b>H<sub>1</sub></b>",title:"Heading 1",result:function(){return s(n,"<h1>")}},heading2:{icon:"<b>H<sub>2</sub></b>",title:"Heading 2",result:function(){return s(n,"<h2>")}},paragraph:{icon:"&#182;",title:"Paragraph",result:function(){return s(n,"<p>")}},quote:{icon:"&#8220; &#8221;",title:"Quote",result:function(){return s(n,"<blockquote>")}},olist:{icon:"&#35;",title:"Ordered List",result:function(){return s("insertOrderedList")}},ulist:{icon:"&#8226;",title:"Unordered List",result:function(){return s("insertUnorderedList")}},code:{icon:"&lt;/&gt;",title:"Code",result:function(){return s(n,"<pre>")}},line:{icon:"&#8213;",title:"Horizontal Line",result:function(){return s("insertHorizontalRule")}},link:{icon:"&#128279;",title:"Link",result:function(){var c=window.prompt("Enter the link URL");c&&s("createLink",c)}},image:{icon:"&#128247;",title:"Image",result:function(){var c=window.prompt("Enter the image URL");c&&s("insertImage",c)}}},h={actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"},p=function(c){var v=c.actions?c.actions.map(function(d){return typeof d=="string"?f[d]:f[d.name]?t({},f[d.name],d):d}):Object.keys(f).map(function(d){return f[d]}),g=t({},h,c.classes),_=c[r]||"div",m=a("div");m.className=g.actionbar,o(c.element,m);var w=c.element.content=a("div");return w.contentEditable=!0,w.className=g.content,w.oninput=function(d){var b=d.target.firstChild;b&&b.nodeType===3?s(n,"<"+_+">"):w.innerHTML==="<br>"&&(w.innerHTML=""),c.onChange(w.innerHTML)},w.onkeydown=function(d){var b;d.key==="Enter"&&(b=n,document.queryCommandValue(b)==="blockquote")&&setTimeout(function(){return s(n,"<"+_+">")},0)},o(c.element,w),v.forEach(function(d){var b=a("button");if(b.className=g.button,b.innerHTML=d.icon,b.title=d.title,b.setAttribute("type","button"),b.onclick=function(){return d.result()&&w.focus()},d.state){var k=function(){return b.classList[d.state()?"add":"remove"](g.selected)};i(w,"keyup",k),i(w,"mouseup",k),i(b,"click",k)}o(m,b)}),c.styleWithCSS&&s("styleWithCSS"),s(r,_),c.element},u={exec:s,init:p};e.exec=s,e.init=p,e.default=u,Object.defineProperty(e,"__esModule",{value:!0})})});var Jo=F(Jr(),1);var lo=F(zn(),1);function Kn(e){var t=0,r,n;if(e.length===0)return t;for(r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t|=0;return t}function xt(e){return Kn(JSON.stringify(e))}var fo=e=>{e.siteRoot=e.href.substring(e.href.lastIndexOf("/")),e.siteRoot.length<1&&(e.siteRoot="/"),e.showSidebar=!1,e.sbTab="Pages",e.recent=[],e.showNewPageField=!1,e.edit=!1,e.editStore=null,e.showSource=!1,e.help={slugify:t=>t.toLowerCase().replace(/\s/g,"_").replace(/\W/g,"-"),find:(t,r="slug")=>e.p.pages.find(n=>n[r]===t),getPage:()=>{let{query:t,help:r,p:n}=e;return!t.page&&n.home?r.find(n.home,"id"):r.find(t.page)},getParent:t=>e.p.pages.find(r=>r.id===t?.parent),getChildren:t=>e.p.pages.filter(r=>r.parent===t?.id),breadcrumb:t=>{let r=[],n=e.help.getParent(t);for(;n;)r.push(n),n=e.help.getParent(n);return r}},e.events={...e.events,HANDLE_404:"404",SHOW_NEW_PAGE_FIELD:"snpf",CREATE_PAGE:"cp",START_EDIT:"se",UPDATE_PAGE:"up",DELETE_PAGE:"dp",COLLECT_TAGS:"ct",CHECK_CHANGED:"cc",SAVE_WIKI:"sw"},e.a=document.getElementById("a").innerHTML,e.s=document.getElementById("s").innerHTML;try{e.p=(0,lo.decompress)(JSON.parse(document.getElementById("p").innerHTML))}catch{e.p={name:"New Wiki",desc:"",pages:[],img:{}}}return e.pg=e.help.getPage(),e.t=[],e.lastSave=xt(e.p),e.currentState=e.lastSave,e.changedSinceSave=!1,e};var Zo=F(zn(),1);var un=F(ve(),1),Oo=(e,t)=>{let{p:r,help:n}=e;return un.default`<section> <header> <h1>All Pages</h1> </header> <article> <p>This wiki has ${r.pages.length} page${r.pages.length!==1?"s":""}:</p> <ul> ${r.pages.filter(o=>!o.parent).map(o=>i(o))} </ul> </article> </section>`;function i(o){let a=n.getChildren(o);return un.default`<li> <a href="?page=${o.slug}">${o.name}</a> ${a.length>0?un.default`<ul>${a.map(l=>i(l))}</ul>`:""} </li>`}};var Yn=F(ve(),1);var Ue=F(ve(),1),cn=(e,t,r={})=>{let{events:n,siteRoot:i}=e,{showDelete:o=!1,showUsed:a=!1,insert:l=null}=r,s=f();return Ue.default`<section> <h1>Existing Images</h1> ${s.map(u=>Ue.default`<div class="ib at pell w14"> <div class=editor> <img src=${u.img} class=w1><br> <button aria-label="View Image" onclick=${c=>h(c,u.img)}>👁</button> ${o?Ue.default`<button aria-label="Delete Image" onclick=${c=>p(c,u)}>❌</button>`:""} ${l?Ue.default`<button aria-label="Insert Image" onclick=${c=>l(c,u)}>✅</button>`:""} ${a?[Ue.default`<details> <summary>Used in ${u.pgs.length} pages</summary> <ul> ${u.pgs.map(c=>Ue.default`<li><a href="${i}?page=${c.slug}">${c.name}</a></li>`)} </ul> </details>`]:""} </div> </div>`)}  </section>`;function f(){let{pages:u,img:c}=e.p;return Object.keys(c).map(v=>({id:v,img:c[v],pgs:a?u.filter(g=>g.content?.includes(`img:${v}:img`)):[]}))}function h(u,c){u.preventDefault();var v=new Image;v.src=c;var g=window.open("");g.document.write(v.outerHTML)}function p(u,c){if(u.preventDefault(),!confirm("Permanently delete image from all pages in wiki?"))return!1;delete e.p.img[c.id],c.pgs.length>0&&(e.p.pages=e.p.pages.map(v=>(v.content&&(v.content=v.content.replaceAll(`<img src="img:${c.id}:img">`,"")),v))),t(n.CHECK_CHANGED)}};var Ro=(e,t)=>{let{events:r,p:n}=e;return Yn.default`<section> <header> <h1>Wiki Settings</h1> </header> <article> <form onsubmit=${i}> <div class=r> <label class="c tr ml w14" for=wTitle>Wiki Title</label> <div class="c w34"> <input class=w1 id=wTitle value=${n.name} minlength=1 required> </div> </div> <div class=r> <label class="c tr ml w14" for=wDesc>Wiki Description</label> <div class="c w34"> <input class=w1 id=wDesc value=${n.desc}> </div> </div> <div class=r> <label class="c tr ml w14" for=home>Home Page</label> <div class="c w34"> <select id=home> <option value="" selected=${!n.home}>Default Page List</option> ${n.pages.map(o=>Yn.default`<option selected=${o.id===n.home} value=${o.id}>${o.name} (${o.slug})</option>`)} </select> </div> </div> <div class=r> <label class="c tr ml w14" for=wPub>Publish</label> <div class="c w34"> <input id=wPub type=checkbox checked=${n.published??!1}> <span class=h>Hides Save, New Page, & Wiki Settings buttons. You will need to manually visit <code>?page=s</code> to unset this when set.</span> </div> </div> <div class=tr> <button type=submit>Update</button> </div> </form> ${cn(e,t,{showDelete:!0,showUsed:!0})} </article> </section>`;function i(o){o.preventDefault();let a=o.currentTarget,l=a.wTitle.value.trim();if(l.length<1)return alert("Title is required");e.p.name=l,e.p.desc=a.wDesc.value.trim(),a.home.value.length>1?e.p.home=a.home.value:delete e.p.home,e.p.published=a.wPub.checked,t(r.CHECK_CHANGED)}};var hn=F(ve(),1),Do=(e,t)=>{let{p:r,query:n}=e,i=r.pages.filter(o=>o.tags?.includes(n.tag));return hn.default`<section> <header> <h1>Pages Tagged <code>${n.tag}</code></h1> </header> <article> ${i.length>0?hn.default`<ul> ${i.map(o=>hn.default`<li><a href="?page=${o.slug}">${o.name}</a></li>`)} </ul>`:"None Found"} </article> </section>`};var er=F(ve(),1),mf=F(Qn(),1);var at=F(ve(),1),Bo=F(Qn(),1);function No(e,t){let r=e??null;return r&&(e?.match(/(?<=\[\[).+?(?=\]\])/g)??[]).map(n=>{let i=n.split("|"),o=i[1]?i[1].trim():t.help.slugify(i[0]);return{match:`[[${n}]]`,link:`<a href="${t.siteRoot}?page=${o}">${i[0]}</a>`}}).forEach(n=>{r=r.replace(n.match,n.link)}),r}function pn(e,t,r=!1){let n=e??null;return n&&(e?.match(/(?<=img:).+?(?=:img)/g)??[]).map(i=>{let o=t.p.img[i];return{match:`img:${i}:img`,link:o+(r?`#${i}`:"")}}).forEach(i=>{n=n.replace(i.match,i.link)}),n}function Ho(e){let t=e??null;return t&&(e?.match(/(?<=<a href=").+?(?=")/g)??[]).map(r=>({match:`<a href="${r}"`,link:`<a href="${r}" target="_blank" rel="noopener noreferrer"`})).forEach(r=>{t=t.replace(r.match,r.link)}),t}var Fo=(e,t,r)=>{let{siteRoot:n,help:i,p:o,events:a}=e,{content:l}=r,s=Ho(l);s=No(s,e),s=pn(s,e);let f=i.getChildren(r);return[at.default`<article class=uc> ${s?(0,Bo.default)(s):"No Page Content"} </article>`,f.length>0?at.default`<aside> <h2>Sub Pages</h2> <ul> ${f.map(h=>at.default`<li><a href="${n}?page=${h.slug}">${h.name}</a></li>`)} </ul> </aside>`:null,r.e?"":at.default`<footer> <div class=r> <dl class="c w34 r"> <dt class=c><b>Tagged:</b></dt> <dd class=c> ${r?.tags?r.tags.replace(/,/g,", "):""} </dd> </dl> ${o.published?"":at.default`<div class="c w14 tr"> <button onclick=${()=>t(a.START_EDIT)}>Edit</button> </div>`} </div> </footer>`]};var $t=F(ve(),1);var Lt=F(ve(),1),st=F(Go(),1);function Vo(e,t=()=>{},r=400,n=350){let i=new FileReader;i.onload=function(o){let a=new Image;a.src=o.target.result,a.onload=()=>{let l=document.createElement("canvas"),s=a.width,f=a.height;if(s>r||f>n){let p=`Your image will be resized to a maximum of ${r} pixels wide and ${n} pixels high to help reduce the file size of the wiki.`;if(!window.confirm(p))return t(null)}s>f?s>r&&(f*=r/s,s=r):f>n&&(s*=n/f,f=n),l.width=s,l.height=f,l.getContext("2d").drawImage(a,0,0,s,f),t(l.toDataURL(e.type))}},i.onerror=function(o){console.error(o),t(null)},i.readAsDataURL(e)}var Uo=e=>{let t=pn(e.editStore.content,e,!0),r,n=a=>e.editStore.content=a.target.value;if(e.showSource)r=Lt.default`<textarea class=editor onchange=${n}>${t}</textarea>`;else{r=Lt.default`<article class=pell></article>`;let a=(0,st.init)({element:r,onChange:l=>e.editStore.content=l,defaultParagraphSeparator:"p",actions:["bold","italic","underline","strikethrough","heading1","heading2","paragraph","quote","olist","ulist","code","link",{name:"externalimage",title:"Link External Image",icon:"\u{1F5BC}\uFE0F",result:()=>{let l=window.prompt("Enter the image URL");l&&(0,st.exec)("insertImage",l)}},{name:"insertimage",title:"Insert Image from File",icon:"\u{1F4F8}",result:i},{name:"addImage",title:"Add Existing Image",icon:"\u{1F4CE}",result:()=>document.getElementById("gal").showModal()}]});a.content.innerHTML=t}return r.isSameNode=a=>a?.nodeName===r?.nodeName,[r,Lt.default`<dialog id=gal> <form class=fr method=dialog> <button>Close</button> </form> ${cn(e,()=>{},{insert:(a,l)=>o(a,l)})} </dialog>`];function i(){if(!confirm("Inserting an image will increase your wiki's file size. Continue?"))return;let a=Lt.default`<input type=file hidden accept=image/* onchange=${l}>`;document.body.appendChild(a),a.click();function l(s){let{files:f}=s.target;f.length>0&&Vo(f[0],h=>{if(h){let p=document.getElementsByClassName("pell-content")[0];document.activeElement!==p&&p.focus();let u=Kn(h);e.p.img[u.toString()]=h,(0,st.exec)("insertHTML",`<p><img src="${h}#${u}"></p>`)}document.body.removeChild(a)})}}function o(a,l){a.preventDefault(),document.getElementById("gal").close();let s=document.getElementsByClassName("pell-content")[0];document.activeElement!==s&&s.focus();let{id:f,img:h}=l;(0,st.exec)("insertHTML",`<p><img src="${h}#${f}"></p>`)}};var Wo=(e,t,r)=>{let{slugify:n}=e.help,{editStore:i,showSource:o,p:a,help:l}=e,s=l.getChildren(r).map(m=>m.id),f=!a.pages.some(m=>m.id===r.id);return $t.default`<form onsubmit=${g}> <header> <h1>Edit Page</h1> <div class=r> <div class="c w12"> <label for=name>Page Title</label> <input id=name value=${i.name} required minlength=2 onchange=${p}> </div> <div class="c w12"> <label for=slug>Page Slug</label> <input id=slug value=${i.slug} required minlength=2 onchange=${p}> <button onclick=${h}>Slugify Title</button> </div> </div></header> ${Uo(e,t)} <div class="w1 tr pb"> <button onclick=${u}>${o?"Show Editor":"Show HTML"}</button> </div> <footer class=r> <div class="c w13"> <label for=tags>Page Tags</label> <input id=tags value=${i.tags} placeholder="Comma, Separated, List" onchange=${p}> <select onchange=${v}> <option value="" selected=selected disabled=disabled>Add Existing Tag</option> ${e.t.filter(m=>!i.tags.split(",").includes(m)).map(m=>$t.default`<option>${m}</option>`)} </select> </div> <div class="c w13"> <label for=parent>Parent</label> <select id=parent onchange=${p}> <option value="" selected=${i.parent===""}>None</option> ${a.pages.filter(m=>m.id!==r?.id&&!s.includes(m.id)).map(m=>$t.default`<option selected=${m.id===i.parent} value=${m.id}>${m.name} (${m.slug})</option>`)} </select> </div> <div class="c w13 tr"> <div class=pb><button type=submit>Save</button></div> ${f?"":$t.default`<div><button class=del onclick=${m=>_(m)}>Delete</button></div>`} </div> </footer> </form>`;function h(m){m.preventDefault(),document.getElementById("slug").value=n(document.getElementById("name").value.trim())}function p(m){let w=m.target;e.editStore[w.id]=w.value,t(e.events.RENDER)}function u(m){m.preventDefault(),e.showSource=!e.showSource,t(e.events.RENDER)}function c(){let m=document.getElementById("tags").value.split(",").map(w=>w.trim());return m.filter((w,d)=>w.length>0&&m.indexOf(w)===d).sort()}function v(m){let w=m.target.value;if(w.length>0){let d=c();d.includes(w)||(i.tags+=(d.length>0?",":"")+w,t(e.events.RENDER))}m.target.value=""}function g(m){m.preventDefault();let w=m.currentTarget,d=w.name.value.trim();if(d.length<1)return alert("Page Title cannot be blank.");let b=w.slug.value.trim();if(b.length<2)return alert("Page Slug must be more than 1 character long.");pg={...r},pg.name=d,pg.slug=n(b),pg.content=e.editStore.content.replace(/(?<=<img src=")[^"]+#([-\d]+)(" style="font-size: \d+pt;)?(?=">)/g,"img:$1:img"),pg.tags=c().join(","),pg.parent=w.parent.value,t(e.events.UPDATE_PAGE,pg)}function _(m){m.preventDefault(),console.log(r),confirm("You can't undo this after saving your wiki! Delete this page?")&&t(e.events.DELETE_PAGE,r.id)}};var Xo=(e,t,r)=>{if(e.edit)return Wo(e,t,r);let n=e.help.breadcrumb(r);return er.default`<section> <header> ${n.map(i=>[er.default`<a href="${e.siteRoot}?page=${i.slug}">${i.name}</a>`," / "])} <h1>${r.name}</h1> </header> ${Fo(e,t,r)} </section>`};var We={a:Oo,s:Ro,t:Do,p:Xo};var zo=(e,t)=>{let{events:r}=e;return t.on(r.DOMCONTENTLOADED,()=>{t.emit(r.HANDLE_404),t.emit(r.DOMTITLECHANGE,e.pg?.name??e.p.name),t.emit(r.COLLECT_TAGS)}),t.on(r.RENDER,n=>{typeof n=="function"&&setTimeout(n,100)}),t.on(r.HANDLE_404,()=>{let{page:n}=e.query;if(n?.length>1){let{help:i,events:o}=e,a=i.slugify(n);if(!i.find(a)&&!We[a]){let s=n.split("_").map(f=>f[0].toUpperCase()+f.substring(1)).join(" ");t.emit(o.CREATE_PAGE,s,!1)}}else n?.length>0&&!We[n]&&(e.pg={e:!0,name:"404",content:"<p>Page not found</p>"},t.emit(r.RENDER))}),t.on(r.NAVIGATE,()=>{e.edit=!1,e.editStore="",e.pg=e.help.getPage(),e.recent=[{p:e.pg?.id,t:Date.now()},...e.recent.filter(n=>n.p!==e.pg?.id)].filter(n=>!!n.p),t.emit(r.HANDLE_404),t.emit(r.DOMTITLECHANGE,e.pg?.name??e.p.name)}),t.on(r.SHOW_NEW_PAGE_FIELD,()=>{e.showNewPageField=!0,t.emit(r.RENDER,()=>{document.getElementById("newPageField").focus()})}),t.on(r.CREATE_PAGE,(n,i=!0)=>{if(n.length<1)return;let{p:o,help:a,events:l,query:s,siteRoot:f}=e,h=()=>{let _=[];for(let m=0;m<9;m++){let w=Math.round(Math.random()*94)+32;_.push(String.fromCharCode(w))}return _.join("")},p;do p=h();while(o.pages.findIndex(_=>_.id===p)>=0);let u=0,c=a.slugify(n),v;do v=c+(u>0?"_"+u:""),u++;while(o.pages.some(_=>_.slug===v));let g={id:p,name:n,slug:v};e.showNewPageField=!1,i?(e.p.pages.push(g),t.emit(l.CHECK_CHANGED),t.emit(l[s.page!==v?"REPLACESTATE":"PUSHSTATE"],f+"?page="+v)):e.pg=g,t.emit(l.START_EDIT)}),t.on(r.START_EDIT,()=>{let{pg:n}=e;e.edit=!0,e.editStore={name:n.name??"",slug:n.slug??"",content:n.content??"",tags:n.tags??"",parent:n.parent??""},e.showSource=!1,t.emit(r.RENDER)}),t.on(r.UPDATE_PAGE,n=>{let{p:i}=e;if(i.pages.some(a=>a.slug===n.slug&&a.id!==n.id))return alert('A page with the slug "'+n.slug+'" already exists!');let o=i.pages.findIndex(a=>a.id===n.id);Object.keys(n).forEach(a=>{n[a].length<1&&delete n[a]}),o>-1?i.pages[o]=n:i.pages.push(n),e.edit=!1,e.editStore=null,t.emit(r.COLLECT_TAGS),t.emit(r.PUSHSTATE,e.siteRoot+"?page="+n.slug),t.emit(r.CHECK_CHANGED)}),t.on(r.DELETE_PAGE,n=>{e.p.pages=e.p.pages.map(i=>(i.parent===n&&delete i.parent,i)).filter(i=>i.id!==n),e.edit=!1,e.editStore=null,t.emit(r.COLLECT_TAGS),t.emit(r.PUSHSTATE,e.siteRoot),t.emit(r.CHECK_CHANGED)}),t.on(r.COLLECT_TAGS,()=>{e.t=e.p.pages.reduce((n,i)=>[...n,...i.tags?.split(",")??[]],[]).filter(n=>!!n).sort()}),t.on(r.CHECK_CHANGED,n=>{e.currentState=xt(e.p),e.changedSinceSave=e.lastSave!==e.currentState,t.emit(r.RENDER,n)}),t.on(r.SAVE_WIKI,async()=>{let n=`<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width,initial-scale=1"> <title>${e.p.name}</title> ${e.p.desc?'<meta name="description" content="'+e.p.desc.replace(/"/g,'\\"')+'">':""} <meta name=version content=0.0.1> <style id=s>${e.s}</style> </head> <body> <script id=a>${e.a}<\/script> <script id=p type=application/json>${JSON.stringify((0,Zo.compress)(e.p))}<\/script> </body> </html>`,i=/\/$/.test(window.location.pathname)?"index.html":window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),o=document.createElement("a");o.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",i),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),e.lastSave=xt(e.p),t.emit(r.CHECK_CHANGED)}),t};var K=F(ve(),1);var Ko=(e,t)=>{let{siteRoot:r,pg:n,p:i,t:o,recent:a,events:l,query:s,changedSinceSave:f,showSidebar:h,sbTab:p,showNewPageField:u}=e,c=!i.published||s.page==="s",v=i.pages.filter(b=>!b.parent).sort((b,k)=>b.name<k.name?-1:1),g=a.sort((b,k)=>b.t>k.t?-1:1).map(b=>i.pages.find(k=>k.id===b.p)),_=n?We.p(e,t,n):(We[s.page??"a"]??(()=>{}))(e,t);return s.tag&&(_=We.t(e,t)),K.default`<body> <header> <span class=db><a href=${r} class="t sb">${i.name}</a></span> ${i.desc?K.default`<p class=sb>${i.desc}</p>`:""} ${c?K.default`<div class=sv> ${f?"Wiki has changed!":""} <button class=${f?"alert":null} title="Download wiki in its current state" onclick=${()=>t(l.SAVE_WIKI)}>Save Wiki</button> </div>`:""} <button class=sbt onclick=${()=>w()}>${h?"Hide":"Show"} Menu</button> </header> <main> <nav class="sb ${h?"":"n"}"> ${c?[K.default`<p><a href="${r}?page=s">Wiki Settings</a></p>`,K.default`<p> <button onclick=${()=>t(l.SHOW_NEW_PAGE_FIELD)}>New Page</button> </p><form hidden=${!u} onsubmit=${m}> <label class=sr for=newPageField>New Page Title</label> <input id=newPageField placeholder="New Page Title" autocomplete=off> <button type=submit>Create</button> </form> <p></p>`]:""} <div> <button class=${p==="Pages"&&"a"} onclick=${d}>Pages</button> ${o.length>0?K.default`<button class=${p==="Tags"&&"a"} onclick=${d}>Tags</button>`:""} <button class=${p==="Recent"&&"a"} onclick=${d}>Recent</button> </div> ${p==="Pages"?K.default`<ul> ${v.map(b=>K.default`<li><a href="${r}?page=${b.slug}">${b.name}</a></li>`)} <li><a href="${r}?page=a">All Pages</a></li> </ul>`:""} ${p==="Tags"?K.default`<ul> ${o.map(b=>K.default`<li><a href="${r}?tag=${b}">${b}</a></li>`)} </ul>`:""} ${p==="Recent"?K.default`<ol> ${g.map(b=>K.default`<li><a href="${r}?page=${b.slug}">${b.name}</a></li>`)} </ol>`:""} </nav> ${_} </main> <footer> <span class=fr>Powered by <a href=https://alamantus.codeberg.page/FeatherWiki target=_blank rel="noopener noreferrer">Feather Wiki</a></span> </footer> </body>`;function m(b){b.preventDefault();let k=b.currentTarget.newPageField.value.trim();if(k.length<2)return alert("Enter more than 1 character to create a new page.");t(l.CREATE_PAGE,k.trim())}function w(){e.showSidebar=!e.showSidebar,t(l.RENDER)}function d(b){e.sbTab=b.target.innerText,t(l.RENDER)}};var Rf=(()=>{let e=(0,Jo.default)({hash:!0});cl(e)})();function cl(e){e.use(fo),e.use(zo),e.route("/:pageSlug",Ko),e.mount("body")}})(); </script> <script id=p type=application/json>{}</script> </body> </html> 